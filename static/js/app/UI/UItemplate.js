// Generated by CoffeeScript 1.8.0
define(['util/object_extend'], function(ObjTool) {
  var UITemplate;
  return UITemplate = (function() {
    var TEMPLATE_ID;

    TEMPLATE_ID = 0;

    function UITemplate(option) {
      if (option == null) {
        option = {};
      }
      this.type = option.type || "";
      this.template = option.template || "";
      this.renderMap = option.renderMap || {};
      this.subviews = {};
      this.subviewsCount = 0;
      this.id = TEMPLATE_ID++;
      this.$template = null;
    }

    UITemplate.prototype.render = function() {
      this.$template = $(ObjTool.replace(this.template, this.renderMap));
      return this;
    };

    UITemplate.prototype._removeView = function(subview) {
      if (subview.id in this.subviews) {
        subview.remove();
        delete this.subviews[subview.id];
        this.subviewsCount--;
      }
      return this;
    };

    UITemplate.prototype.remove = function() {
      this.$template.remove();
      return this;
    };

    UITemplate.prototype.addSubview = function(subview) {
      if (subview instanceof UITemplate) {
        subview["super"] = this;
        this.subviews[subview.id] = subview;
        this.subviewsCount++;
      }
      return this;
    };

    UITemplate.prototype.removeAllSubview = function() {};

    UITemplate.prototype.removeFromSuper = function() {
      if (this["super"]) {
        this["super"]._removeView(this);
      }
      return this;
    };

    return UITemplate;

  })();
});
